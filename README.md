# Konfigurasi halaman
Bagian kode `st.set_page_config(page_title="Dashboard Covid-19 Indonesia", layout="wide")` dan `st.title("📊 Dashboard Data Covid-19 Indonesia")` berfungsi untuk mengatur tampilan awal dari aplikasi Streamlit yang sedang dibangun. Perintah `set_page_config` digunakan untuk mengatur konfigurasi halaman, di mana `page_title` akan menentukan judul halaman yang muncul di tab browser pengguna, yaitu “Dashboard Covid-19 Indonesia”. Sementara itu, parameter `layout="wide"` membuat tampilan dashboard melebar ke seluruh layar, sehingga memberikan ruang lebih untuk menampilkan grafik, tabel, dan elemen visual lainnya secara efisien. Selanjutnya, `st.title("📊 Dashboard Data Covid-19 Indonesia")` menampilkan judul utama pada halaman dashboard dengan ikon grafik agar tampilannya lebih menarik. Bagian ini memberikan kesan profesional, sekaligus langsung menjelaskan kepada pengguna bahwa aplikasi ini adalah sebuah dashboard analisis data Covid-19 di Indonesia.
# Load data
Bagian kode `@st.cache_data` hingga `df = load_data()` digunakan untuk memuat dan mempersiapkan data yang akan digunakan dalam dashboard. Fungsi `load_data()` bertugas membaca file CSV bernama `data_covid_indonesia.csv` menggunakan `pd.read_csv`, lalu melakukan beberapa pembersihan dan konversi data. Kolom `"tanggal"` diubah menjadi format `datetime` menggunakan `pd.to_datetime` agar dapat difilter berdasarkan rentang waktu, sedangkan kolom `"provinsi"` dikonversi menjadi tipe string untuk memastikan konsistensi data provinsi. Fungsi ini didekorasi dengan `@st.cache_data`, yang berarti hasil pembacaan data akan disimpan dalam cache oleh Streamlit. Ini berguna untuk meningkatkan performa aplikasi, karena data tidak akan dibaca ulang dari file setiap kali pengguna berinteraksi dengan dashboard, kecuali file datanya berubah. Terakhir, `df = load_data()` memanggil fungsi tersebut dan menyimpan hasilnya ke dalam variabel `df`, yang akan digunakan untuk analisis dan visualisasi selanjutnya.
# Sidebar - Filter
Bagian kode ini berfungsi untuk membuat komponen **filter interaktif** di sidebar dashboard menggunakan Streamlit. Pertama, `st.sidebar.header("🔎 Filter Data")` menambahkan judul pada sidebar agar pengguna memahami bahwa bagian ini digunakan untuk memfilter data. Selanjutnya, `provinsi_selected = st.sidebar.multiselect(...)` menampilkan sebuah daftar pilihan (dropdown dengan checkbox) yang memungkinkan pengguna memilih satu atau beberapa provinsi yang ingin dianalisis. Nilai default-nya adalah seluruh provinsi yang tersedia dalam dataset, sehingga jika tidak ada filter yang dipilih, semua data akan ditampilkan. Kemudian, `tanggal_mulai = st.sidebar.date_input(...)` dan `tanggal_akhir = st.sidebar.date_input(...)` masing-masing membuat input kalender yang memungkinkan pengguna memilih rentang waktu berdasarkan data tanggal yang tersedia. Dengan adanya komponen-komponen ini, pengguna memiliki kontrol penuh untuk menampilkan data Covid-19 berdasarkan provinsi tertentu dan periode waktu yang diinginkan, menjadikan dashboard lebih fleksibel dan informatif sesuai kebutuhan analisis masing-masing pengguna.
# Filter data
Potongan kode ini bertugas untuk melakukan **penyaringan data** berdasarkan pilihan yang sudah ditentukan oleh pengguna melalui sidebar. Variabel `filtered_df` menyimpan hasil filter dari data utama `df`. Proses penyaringan ini dilakukan dalam tiga kondisi sekaligus: pertama, `df["provinsi"].isin(provinsi_selected)` menyaring baris data hanya untuk provinsi yang dipilih oleh pengguna; kedua, `df["tanggal"] >= pd.to_datetime(tanggal_mulai)` memastikan hanya data dengan tanggal yang lebih besar atau sama dengan tanggal mulai yang dipilih akan ditampilkan; dan ketiga, `df["tanggal"] <= pd.to_datetime(tanggal_akhir)` membatasi data hingga tanggal akhir yang ditentukan. Ketiga kondisi ini digabungkan dengan operator logika `&` untuk menghasilkan subset data yang sesuai dengan filter yang telah diatur di sidebar. Dengan demikian, variabel `filtered_df` berisi data Covid-19 yang relevan sesuai dengan preferensi wilayah dan waktu pengguna, yang kemudian digunakan untuk analisis dan visualisasi dalam dashboard.
# Statistik agregat
Bagian kode ini berfungsi untuk menampilkan **statistik agregat** dari data Covid-19 yang telah difilter sebelumnya oleh pengguna. Pertama, `st.subheader("📈 Statistik Agregat")` menampilkan judul bagian untuk memberi tahu bahwa informasi yang disajikan adalah hasil ringkasan data. Selanjutnya, tiga variabel utama dihitung: `total_kasus` menghitung total kasus harian, `total_sembuh` menjumlahkan seluruh kasus sembuh, dan `total_meninggal` menjumlahkan jumlah kematian—semuanya berdasarkan data yang telah difilter (`filtered_df`). Kemudian, dihitung pula dua rasio penting: `rate_sembuh`, yaitu persentase tingkat kesembuhan terhadap total kasus, dan `rate_meninggal`, yaitu rasio kematian terhadap total kasus. Keduanya dinyatakan dalam bentuk persentase, dengan perlindungan dari pembagian nol (`if total_kasus else 0`). Hasil perhitungan ini ditampilkan secara visual ke dalam tiga kolom menggunakan `st.columns(3)`, dan setiap kolom menampilkan satu metrik utama menggunakan `st.metric`. Visualisasi ini mempermudah pengguna dalam melihat gambaran umum kondisi Covid-19 untuk wilayah dan periode yang dipilih, serta memantau performa penanganan pandemi dari sisi kesembuhan dan kematian.
# Grafik kasus harian
Potongan kode ini menyajikan **tabel ringkasan data Covid-19 per provinsi** berdasarkan data yang telah difilter oleh pengguna sebelumnya. Pertama, `filtered_df.groupby("provinsi")` mengelompokkan data berdasarkan nama provinsi, kemudian menggunakan `agg(...)` untuk menghitung total dari tiga metrik utama: jumlah kasus harian (`kasus_harian`), jumlah pasien sembuh (`sembuh`), dan jumlah kematian (`meninggal`) untuk setiap provinsi. Hasil agregasi ini disimpan dalam variabel `df_provinsi` dan diubah kembali menjadi DataFrame biasa dengan `reset_index()` agar lebih mudah ditampilkan.

Setelah itu, ditambahkan dua kolom baru yang menunjukkan performa penanganan Covid-19 di tiap provinsi dalam bentuk persentase: **"Tingkat Kesembuhan (%)"** dihitung dari perbandingan jumlah sembuh terhadap total kasus, dan **"Rasio Kematian (%)"** berasal dari jumlah kematian dibandingkan jumlah kasus. Kedua metrik ini penting untuk mengevaluasi efektivitas penanganan pandemi di masing-masing wilayah.

Akhirnya, `st.dataframe(...)` digunakan untuk menampilkan tabel ini secara interaktif di Streamlit, dengan format angka yang sudah diperindah: angka besar dipisah ribuan, dan nilai persentase dibatasi dua angka di belakang koma. Tabel ini membantu pengguna memahami perbedaan dampak dan respons pandemi antar provinsi di Indonesia secara lebih rinci dan mudah dibandingkan.
